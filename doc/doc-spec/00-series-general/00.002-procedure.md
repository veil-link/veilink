# 00.002 Procedure

## 1. Controller Start/Stop

### 1.1 Controller Start

```mermaid
sequenceDiagram
    autonumber

    participant amf as AMF
    participant smf as SMF
    participant pkf as PKF
    participant nsf as NSF
    participant drf as DRF
    participant oam as OAM

    nsf ->>+ nsf:NR_REGISTERATION_REQUEST
    nsf -->>- nsf:NF_REGISTERATION_ACCEPT

    par
        amf ->>+ nsf:NF_REGISTERATIONR_REQUEST
        nsf -->>- amf:NF_REGISTERATION_ACCEPT
    and
        smf ->>+ nsf:NF_REGISTERATION_REQUEST
        nsf -->>- smf:NF_REGISTERATION_ACCEPT
    and
        pkf ->>+ nsf:NF_REGISTERATION_REQUEST
        nsf -->>- pkf:NF_REGISTERATION_ACCEPT
    and
        drf ->>+ nsf:NF_REGISTERATION_REQUEST
        nsf -->>- drf:NF_REGISTERATION_ACCEPT
    and
        oam ->>+ nsf:NF_REGISTERATION_REQUEST
        nsf -->>- oam:NF_REGISTERATION_ACCEPT
    end
```

### 1.2 Controller Stop

```mermaid
sequenceDiagram
    autonumber

    participant amf as AMF
    participant smf as SMF
    participant pkf as PKF
    participant nsf as NSF
    participant drf as DRF
    participant oam as OAM

    par
        oam ->>+ nsf:NF_DE_REGISTERATION_REQUEST
        nsf -->>- oam:NF_DE_REGISTERATION_ACCEPT
    and
        drf ->>+ nsf:NF_DE_REGISTERATION_REQUEST
        nsf -->>- drf:NF_DE_REGISTERATION_ACCEPT
    and
        pkf ->>+ nsf:NF_DE_REGISTERATION_REQUEST
        nsf -->>- pkf:NF_DE_REGISTERATION_ACCEPT
    and
        smf ->>+ nsf:NF_DE_REGISTERATION_REQUEST
        nsf -->>- smf:NF_DE_REGISTERATION_ACCEPT
    and
        amf ->>+ nsf:NF_DE_REGISTERATIONR_REQUEST
        nsf -->>- amf:NF_DE_REGISTERATIONR_ACCEPT
    end

    nsf ->>+ nsf:NR_DE_REGISTERATION_REQUEST
    nsf -->>- nsf:NF_DE_REGISTERATION_ACCEPT
```

## 2. NF Start/Stop

### 2.1 NF Start

```mermaid
graph LR
    Y(NF Started)
    Z(Exit)

    A(Start NF) -->  B[Load Configurations]
    B -- Success --> C[Logger Setup]
    B -- Fail --> Z
    C -- Success --> D[Start SBI Server]
    C -- Fail --> Z
    D -- Success --> E[Register to NSF]
    D -- Fail --> Z
    E -- Success --> F{Has NX Interface?}
    E -- Fail --> Z
    F -- Yes --> G[Setup NX Interface]
    F -- No --> Y
    G -- Success --> Y
    G -- Faile --> Z
```

### 2.2 NF Stop

```mermaid
graph LR
    Z(NF Stopped)

    A(Stop NF) --> B{Has NX Interface}
    B -- Yes --> C[Close NX Interface]
    B -- No --> D[De-register to NSF]
    C --> D
    D --> E[Stop SBI Server]
    E --> Z
```

## 3. Identity Registeration/De-registeration

### 3.1 Identity Registration

### 3.2 Identity De-registration

## 4. Session Establishment/Modification/Release

### 4.1 Session Establishment

### 4.2 Session Modification

### 4.3 Session Release

## 5. QUIC Forward
