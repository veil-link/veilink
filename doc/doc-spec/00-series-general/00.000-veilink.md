# 00.000 Veil-link

## 1. Introduction

**Veil-link** (short as `veilink`) is a project to design and implement an updated concept of a **Zero Trust SDN network**. It takes **PKI/identity** as the root of trust and borrows architectural ideas from the **5G Core: CUPS (Control and User Plane Separation) + SBA (Service-Based Architecture)** to recompose the control plane and data plane. The intent is to make the overall system clearer in operability, extensibility, and dynamic orchestration.

This project targets several common “real-world” pain points that often appear after multiple iterations of existing zero-trust networking stacks:

- **Growing architectural complexity**: components, flows, and responsibility boundaries become harder to reason about and maintain over time.
- **Hard-to-automate certificate/identity lifecycle**: at scale, credential rotation and revocation need a low-friction, observable, controllable automation model.
- **Lack of explicit and real-time dataplane path control**: “path pinning” and near-real-time re-routing are not clearly supported, making it difficult to react to policy/topology/load changes.

## 2. Current Open-source Projects

### 2.1 Zero Trust SDN - [OpenZiti](https://github.com/openziti)

OpenZiti is a mature open-source zero-trust networking project. Several of its concepts are highly relevant to Veil-link:

- **Identity as the root of trust**: build trust relationships around identities, commonly implemented via mTLS + X.509 (PKI).
- **Service-centric connectivity**: use “services” as the connectivity abstraction (who can reach what), instead of traditional L3/L4 “subnets/ACLs”.
- **Policy-driven access**: use policies to define reachability, authorization, and connection behavior so “never trust by default” becomes systematic.

However, after multiple iterations, if we evaluate from operability and dynamic orchestration perspectives, there are practical challenges that Veil-link wants to address:

- **Insufficient automation/controllability for credential rotation**: needs a more standardized renewal/rotation/revocation workflow and better coordination with control-plane policy.
- **Insufficient dataplane path control**: when you want to pin a specific dataplane path or switch traffic within seconds, the control-plane interface and dataplane distribution model are not explicit.
- **Increasingly complex responsibility boundaries**: evolution often leads to scattered features and coupled interactions, increasing operational cost.

Veil-link’s approach is not to reject OpenZiti, but to **preserve the core identity/PKI and policy principles** and recompose them with a clearer control/data separation and a service-based control plane.

### 2.2 5GC - [free5GC](https://github.com/free5gc)

free5GC is an open-source implementation of the 5G Core based on 3GPP release 17. Veil-link mainly borrows two architectural ideas:

- **CUPS (control/user plane separation)**: the control plane coordinates policy, state, and resources; the data/user plane focuses on high-speed forwarding and executing distributed rules.
- **SBA (service-based architecture)**: compose the control plane from multiple services (network functions), communicating through explicit APIs/interfaces to enable evolution, replacement, and extension.

For Veil-link, this provides a highly “engineering-friendly” way to structure the solution:

- Split **identity/credentials**, **policy**, **topology**, **path computation**, and **distribution/updates** into independently evolvable control-plane services.
- Keep the dataplane as an execution layer that can be orchestrated in near real time, focusing on **rule/path enforcement** and **fast convergence**.

## 3. Contributions

Veil-link’s expected contributions focus on making a zero-trust SDN network more deployable, dynamic, and operable:

- **A refreshed zero-trust SDN architecture**: grounded in identity/PKI and recomposed with CUPS+SBA-style control/data separation.
- **An automatable credential/identity lifecycle**:

    - Support automated renewal/rotation (e.g., short-lived certificates and/or an explicit renewal protocol)
    - Provide observability and controllability (e.g., rotation status, failure reasons, revocation scope/effect)

- **Explicit, real-time-updatable dataplane paths**:

    - Use intents/policies to constrain or prefer paths (e.g., must-pass nodes, avoid regions, latency/cost constraints)
    - Support near-real-time reroute for topology faults or policy changes

- **A componentized, service-oriented design to reduce evolution cost**: converge complexity into clear interfaces and responsibility boundaries, making future extensions (multi-tenancy, segmentation, observability/audit) easier.

## 4. Methods

This chapter outlines Veil-link’s methodology (how we design and build it).

### 4.1 Layering (CUPS mindset)

- **Control Plane**: maintains global state and makes decisions, including identity/PKI, policy, topology, path computation, and dataplane rule distribution.
- **Data Plane**: enforces distributed rules/paths and reports telemetry to support closed-loop orchestration. In this model, the service provider is assumed to be deployed in a controlled internal network segment (not directly exposed to the public Internet), so the external authentication boundary primarily applies to users/clients and routers.

### 4.2 Service-based control plane (SBA mindset)

The control-plane capabilities can be split into several services (names can be finalized in [00.001](./00.001-architecture.md)):

- **Identity / PKI Service**: issue, renew, and revoke credentials; manage enrollment and renewal; provide revocation info and enforcement strategy.
- **Policy Service**: define “who can reach what service” and path/security/QoS constraints, with versioning and auditability.
- **Topology Service**: maintain nodes/links/capabilities and health status.
- **Path Computation Service (PCE)**: compute paths based on policy + topology (multi-path / redundancy), outputting a distributable dataplane desired state.
- **Distribution / Update Service**: securely deliver desired state to the dataplane with incremental updates, rollback, and convergence acknowledgements.

### 4.3 PKI and automated credential updates

A minimal viable design direction includes:

- **Bootstrap / Enrollment**: bind node/workload identity via a one-time enrollment credential/token.
- **Renewal / Rotation**:

    - Support automated renewal and rotation (short-lived certificates can reduce compromise impact)
    - Clearly define “when to rotate, retry strategy, degradation behavior, and observability”

- **Revocation**: revocation must take effect quickly (via control-plane distribution and/or dataplane cache update mechanisms).

### 4.4 Explicit dataplane path pinning and real-time updates

We recommend a closed-loop model: **intent → compute → distribute → convergence confirmation**:

- **Intent/Policy**: users or the system expresses path requirements (preferences/constraints/cost models).
- **Path Computation**: compute paths under topology and policy constraints.
- **Rule Distribution**: distribute a versioned desired state to the dataplane (support incremental updates).
- **Fast Re-route**: re-compute and switch quickly on topology/health/policy changes; support rollback if needed.

### 4.5 Mapping to 5GC concepts (engineering guidance)

- **Control-plane services ↔ SBA NFs/services**: clear APIs prevent a monolithic control plane.
- **Data plane ↔ UPF/forwarding execution**: dataplane focuses on forwarding and rule execution; control plane coordinates policy and state.
